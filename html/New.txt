<!DOCTYPE html>
<html>
<head>
<meta  charset="UTF-8"  content="width=device-width, height=device-height, initial-scale=1.0" name="viewport">
<title>New Albums on MA</title>
<link rel="stylesheet" href="style.css">
<script src="jquery.min.js">  </script>
<script type="text/javascript" language="javascript" src="jquery.dataTables.min.js"></script>
<link rel="shortcut icon" type="image/png" href="cat.png"/>
<script>
let today = new Date(); 
today. setHours(new Date().getUTCHours()- 36);
function layoutFunction() {
  if (($( window ).width() )< 800 ) {
  $( "tr>td, tr>#tableHTML_header_1" ).wrap( "<div class='new'></div>");
	$( "<h3>By release date</h3>" ).insertBefore( ".new>#tableHTML_header_1:nth-child(1)" );
  } else {
    $( ".new>td" ).unwrap();
	$(".new h3").remove();
  }
}
$(function(){
    $('.release_info').DataTable( {
      "order": [[ 9, "asc" ]],
      "lengthMenu": [50, 100, 200, 400, "All"],
      "columnDefs": [
        { "targets": [ 0,1 ], "searchable": false, "sorting": false },
      ],
      "search": { "regex": true},
      "autoWidth": false
    });
    $(".dataTables_filter label input").attr("placeholder", "Search for albums or bands..");
    let table = $('.release_info').DataTable();
	table.draw(); 
	setTimeout(function(){ table.draw();$('.release_info').fadeIn(); }, 1000);
    $('.filter,.genrefilter,.paginate_button').change( function() {
	  $("body,html").animate({scrollTop: $(".release_info th").offset().top }, 800);
      table.draw(); 
      layoutFunction();
    });
    <!-- if (($( window ).width() )< 1280)  {table.columns( [4] ).visible( false );table.columns.adjust().draw( true );} -->
    <!-- if (($( window ).width() )< 1024)  {table.columns( [4,8] ).visible( false );table.columns.adjust().draw( true );} -->
    layoutFunction();
  <!-- }); -->
  $("#about").click(function(){
    $("#project").fadeToggle();
  });
  $('#Upcoming, #Reissue, #black, #death, #other').attr("checked", true);
  $('.genrefilter').first().change(function() {
    if($(this).is(':not(:checked)') && $('.genrefilter').length > 0) {
      alert('I hope you improve your taste');
      $("#black").attr("class", "filter");
    }
  });
});
$.fn.dataTable.ext.search.push(
  function( settings, data, dataIndex ) {
    let genre =  data[5].toLowerCase(); 
    let type =  data[6]; 
    let date =  new Date(data[9].replace(/-/g,'/'));
    let version =  data[10]; 
    if (  ($('#Fulllength').is(':checked') && type.indexOf('Full') < 0 ) || ($('#Upcoming').is(':checked') && date < today ) || ($('#Reissue').is(':checked') && version.indexOf('NA') < 0 ) || ($('#black').is(':not(:checked)') && genre.indexOf('black') > -1  && genre.indexOf('death') < 0 ) || ($('#death').is(':not(:checked)') && genre.indexOf('death') > -1  && genre.indexOf('black') < 0 ) || ($('#other').is(':not(:checked)') && (genre.indexOf('black') < 0  && genre.indexOf('death') < 0 )) )
    {return false;}
    return true;
  }
);
$(window).resize(function() {
  layoutFunction();
})
window.onscroll = (function() {
  if ($(window).width() >= 800 ) {
    let scrollY= $(window).scrollTop();
    if (scrollY<0) {layoutFunction();}
    if ( scrollY > $(window).height()*.5 && $('tr:hover').length > 0) {
      $("#header").css("font-size", "1.5em");
    } else {
      $("#header").css("fontSize", "2em");
    }}
});
</script> 
<style>
</style>
 </head>
<body> 
<h1 class="glow" id="header">New albums on MA &nbsp;</h1>
<div class="sidenav"><a href="../" id="home">Home</a></div>
<div class='contentWrapper'>
<h3>All data from <a href="https://www.metal-archives.com/">THE Metal Archives</a>, with more album info included and duplicates filtered out. Web page genereated with <a href="https://www.r-project.org/">R</a>.</h3>

<!-- <div>About <b id ='about'>CheckingOutShitonMA</b> project</div> -->
<!-- <div id ='project' class='hideItem'> -->
<!-- <p><i>CheckingOutShitonMA</i> is a project by hel_leen, who is known for the most frostbitten music taste among social scientist wannabes. </p><p>She created the project mainly for herself, after spending years rummaging through every deepest corner of frostbitten genres searching for promising bands and albums, despite an increasing frustration since the task of selection is rendered extremely difficult by the superabundance of materials endowed by contemporary basement musicians. </p><p>She's glad to share if this helps in any way. </p></div> -->
<div><p class='note'><b>NOTE:</b><br> The last column "EarliestDate" stands for (literally) the earliest release date of other version(s) of the album in question, if it has any, while the value "NA" indicates the album doesn't have any version earlier than the one shown here. The info is useful when you want to skip re-release albums.
<br>The column "BandPage" only shows links of the first band in case of a split or compilation.
<br><a href="https://www.metal-archives.com/images/cat.jpg">Cat picture</a> will be shown if the album doesn't have any cover(!?).
<br>The page is RAM-eating while loading the big bunch of covers. Good luck!<br>&nbsp;</p> 

<p class='note' id='date'></p>
</div>
<li class="filterSection">
<strong>Filters:&nbsp;</strong>
<label class="checkcontainer">Today onwards
<input class="filter" id="Upcoming" type="checkbox"> 
<span class="checkmark"></span></label>
<label class="checkcontainer">No Reissue
<input class="filter" id="Reissue" type="checkbox"> 
<span class="checkmark"></span></label>
<label class="checkcontainer">Full-length only
<input class="filter" id="Fulllength" type="checkbox"> 
<span class="checkmark"></span></label>
</li>
<li class="filterSection">
<strong>Genre:&nbsp;</strong>
<label class="checkcontainer">Black metal
<input class="genrefilter" id="black" type="checkbox"> 
<span class="checkmark"></span></label>
<label class="checkcontainer">Death metal
<input class="filter" id="death" type="checkbox"> 
<span class="checkmark"></span></label>
<label class="checkcontainer">Other
<input  class="filter" id="other" type="checkbox"> 
<span class="checkmark"></span></label>
</li>
<div>
<p> </p>
</div>
<div id="includedTable">


</div>
</div>
<div id="includedContent"></div>
  

<!-- </body>  -->
<!-- </html> -->
